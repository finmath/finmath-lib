<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/markdown/codingconventions.md at 2020-04-14
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>finmath lib &#x2013; Coding Conventions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">finmath lib <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Introduction">Introduction</a></li>
            <li><a href="apidocs" title="API Documentation">API Documentation</a></li>
            <li><a href="gettingstarted.html" title="Getting Started">Getting Started</a></li>
            <li class="dropdown-submenu">
<a href="building.html" title="Building from Source">Building from Source</a>
              <ul class="dropdown-menu">
                  <li><a href="maven.html" title="Maven Build">Maven Build</a></li>
                  <li><a href="eclipseproject.html" title="Eclipse Project">Eclipse Project</a></li>
              </ul>
            </li>
            <li><a href="https://github.com/finmath/finmath-lib/releases" title="Releases">Releases</a></li>
            <li><a href="releasenotes.html" title="Release Notes">Release Notes</a></li>
            <li><a href="codingconventions.html" title="Coding Conventions">Coding Conventions</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Concepts <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="concepts/stochasticautomaticdifferentiation" title="Stochastic Automatic Differentiation">Stochastic Automatic Differentiation</a></li>
            <li><a href="concepts/automatictrackingofmeasurability" title="Automatic Tracking of Measurability">Automatic Tracking of Measurability</a></li>
            <li class="dropdown-submenu">
<a href="concepts/separationofproductandmodel" title="Separation of Product and Model and Numerical Method">Separation of Product and Model and Numerical Method</a>
              <ul class="dropdown-menu">
                  <li><a href="concepts/separationofproductandmodel/modelandproductinterfaces.html" title="Model and Product Interfaces">Model and Product Interfaces</a></li>
                  <li><a href="concepts/separationofproductandmodel/modelandproductdescriptors.html" title="Model and Product Descriptors">Model and Product Descriptors</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usages <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../finmath-experiments" title="Experiments">Experiments</a></li>
            <li><a href="../finmath-spreadsheets/" title="Spreadsheets">Spreadsheets</a></li>
            <li><a href="../topics/" title="Special Topics">Special Topics</a></li>
            <li><a href="http://christian-fries.de/finmath/applets/" title="Applets">Applets</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="project-summary.html" title="Project Summary">Project Summary</a></li>
                  <li><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
                  <li><a href="integration.html" title="Continuous Integration">Continuous Integration</a></li>
                  <li><a href="license.html" title="Project License">Project License</a></li>
                  <li><a href="team-list.html" title="Project Team">Project Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="testapidocs/index.html" title="Test Javadoc">Test Javadoc</a></li>
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="clover/index.html" title="Clover">Clover</a></li>
                  <li><a href="checkstyle.html" title="Checkstyle">Checkstyle</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
            <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
    <li><a href="../" title="finmath.net">finmath.net</a></li>
                </ul>
              </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="./" id="bannerLeft"><h2>finmath lib</h2>
</a></div>
          <div class="pull-right"><a href=".." id="bannerRight"><img src="../artwork/logo.png"  alt="finmath.net" width="60"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-04-14<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 5.0.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">finmath lib</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="apidocs" title="API Documentation"><span class="none"></span>API Documentation</a></li>
    <li><a href="gettingstarted.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="building.html" title="Building from Source"><span class="icon-chevron-right"></span>Building from Source</a></li>
    <li><a href="https://github.com/finmath/finmath-lib/releases" class="externalLink" title="Releases"><span class="none"></span>Releases</a></li>
    <li><a href="releasenotes.html" title="Release Notes"><span class="none"></span>Release Notes</a></li>
    <li class="active"><a href="#"><span class="none"></span>Coding Conventions</a></li>
   <li class="nav-header">Concepts</li>
    <li><a href="concepts/stochasticautomaticdifferentiation" title="Stochastic Automatic Differentiation"><span class="none"></span>Stochastic Automatic Differentiation</a></li>
    <li><a href="concepts/automatictrackingofmeasurability" title="Automatic Tracking of Measurability"><span class="none"></span>Automatic Tracking of Measurability</a></li>
    <li><a href="concepts/separationofproductandmodel" title="Separation of Product and Model and Numerical Method"><span class="icon-chevron-down"></span>Separation of Product and Model and Numerical Method</a>
     <ul class="nav nav-list">
      <li><a href="concepts/separationofproductandmodel/modelandproductinterfaces.html" title="Model and Product Interfaces"><span class="none"></span>Model and Product Interfaces</a></li>
      <li><a href="concepts/separationofproductandmodel/modelandproductdescriptors.html" title="Model and Product Descriptors"><span class="none"></span>Model and Product Descriptors</a></li>
     </ul></li>
   <li class="nav-header">Usages</li>
    <li><a href="../finmath-experiments" title="Experiments"><span class="none"></span>Experiments</a></li>
    <li><a href="../finmath-spreadsheets/" title="Spreadsheets"><span class="none"></span>Spreadsheets</a></li>
    <li><a href="../topics/" title="Special Topics"><span class="none"></span>Special Topics</a></li>
    <li><a href="http://christian-fries.de/finmath/applets/" class="externalLink" title="Applets"><span class="none"></span>Applets</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="www.finmath.net/finmath-lib" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
    <div id="twitter">
    <a href="https://twitter.com/finmathnet" class="twitter-follow-button" data-show-count="false" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow finmathnet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Coding Conventions</h1>
<p>Below you find some high level design principles. With respect to the low-level code style, see the checkstyle file.</p><section>
<h2><a name="Design_Principles"></a>Design Principles</h2><section>
<h3><a name="Implementation_against_Interfaces"></a>Implementation against Interfaces</h3>
<p>The library is developed to allow users to focus on its interfaces. Code should implement against an interface (e.g., the left hand side of an assignment should be an interface).</p></section><section>
<h3><a name="Naming.2C_Code_is_Documentation"></a>Naming, Code is Documentation</h3>
<p>Class names, member names and variable names are as descriptive as possible (feasible). Names are formed using camel notation from the general to the special property. Implementation details are appended. Examples:</p>
<ul>

<li>periodStart</li>
<li>periodEnd</li>
<li>RandomVariableFromDoubleArray</li>
<li>DiscountCurveInterpolation</li>
</ul>
<p>A reassignment of a reference that alters the meaning should be avoided. A temporary assignment with a different meaning should be avoided. Example:</p>
<p>Wrong:</p>

<div>
<div>
<pre class="source">	var discountFactor = (1 + forwardRate * periodLength);
	discountFactor = 1.0/discountFactor;
</pre></div></div>

<p>Correct:</p>

<div>
<div>
<pre class="source">	var forwardBond = (1 + forwardRate * periodLength);
	var discountFactor = 1.0/forwardBond;
</pre></div></div>
<section>
<h4><a name="Naming_of_Interfaces"></a>Naming of Interfaces</h4>
<p>Interfaces should come with names describing the core concept (like BrownianMotion  or RandomVariable or Curve). Implementations pick up the name of the main interface followed by a specification of an implementation aspect (like RandomVariableFromDoubleArray).</p></section><section>
<h4><a name="Naming_of_Collections"></a>Naming of Collections</h4>
<p>Collections are named as the plural of their items. Example:</p>

<div>
<div>
<pre class="source">	Period period = periods.get(periodIndex);
</pre></div></div>

<p>In cases where it adds clarity the collection type can be used as a suffix instead of the plural. Example:</p>

<div>
<div>
<pre class="source">	RandomVariable sensitivity = sensitivityMap.get(riskFactor);
</pre></div></div>
</section><section>
<h4><a name="Naming_of_Arguments"></a>Naming of Arguments</h4>
<p>If constructor arguments or setter (builder) arguments are used to set fields, the field and the argument have the same name, i.e., we use</p>

<div>
<div>
<pre class="source">	private final double value;
	
	Skalar(double value) {
		this.value = value;
	}
</pre></div></div>
</section></section><section>
<h3><a name="Naming_of_Unit_Tests"></a>Naming of Unit Tests</h3>
<p>Unit test names are end with the word Test and formed as XxxYyyTest where Xxx is the name of the primary class being under test (it may be that a tests is testing a broader aspect of the class) and Yyy optionally specifies an aspect. Example: LIBORMarketModelCalibrationTest. The methods of the unit test start with the word test.</p></section><section>
<h3><a name="Thread_Safety"></a>Thread Safety</h3>
<p>The library is developed with thread safety in mind.</p>
<ul>

<li>Classes prefer a design resulting in <i>effectively immutable object</i>.
<ul>

<li>Method calls are idempotent.</li>
<li>Method calls are free of side effects.</li>
</ul>
</li>
<li>Members are final whenever possible.</li>
</ul></section><section>
<h3><a name="Lazy_Initialization"></a>Lazy Initialization</h3>
<p>The library utilized lazy initialization for time consuming task. Object construction is expected to require minimal resources.</p></section><section>
<h3><a name="Serialization"></a>Serialization</h3>
<p>The library is developed with object serialization in mind.</p>
<ul>

<li>Classes should implement the Serializable interface.</li>
</ul></section></section><section>
<h2><a name="Language"></a>Language</h2><section>
<h3><a name="Language_Extensions"></a>Language Extensions</h3>
<p>The code is written in Java. That is, it avoids language extensions like <i>Lombok</i>.</p></section><section>
<h3><a name="Java_Modules"></a>Java Modules</h3>
<p>Starting with version 5.x the library will export Java 9 modules.</p></section></section><section>
<h2><a name="Language"></a>Language</h2><section>
<h3><a name="Language_Extensions"></a>Language Extensions</h3>
<p>The code is written in Java. That is, it avoids language extensions like <i>Lombok</i>.</p></section><section>
<h3><a name="Java_Modules"></a>Java Modules</h3>
<p>Starting with version 5.x the library will export Java 9 modules.</p></section></section><section>
<h2><a name="Other_Principles"></a>Other Principles</h2>
<ul>

<li>Code in src/main should conform to DRY (don&#x2019;t repeat yourself). Unit tests in src/test should be self-contained and code duplication (e.g. create a model for a specific purpose) is fine.</li>
</ul></section><section>
<h2><a name="Documentation"></a>Documentation</h2><section>
<h3><a name="JavaDoc_with_MathJax"></a>JavaDoc with MathJax</h3>
<p>Every public interface, class, method, enum comes with a complete JavaDoc. If there are mathematical formulas, we use MathJax. (MathJax is available due to a configuration in the Maven pom.xml).</p></section></section><section>
<h2><a name="Code_Style"></a>Code Style</h2>
<p>We follow loosely the Eclipse coding conventions, which are a minimal modification of the original Java coding conventions. See <a class="externalLink" href="https://wiki.eclipse.org/Coding_Conventions">https://wiki.eclipse.org/Coding_Conventions</a></p>
<p>See also the Spring coding conventions, see <a class="externalLink" href="https://github.com/spring-projects/spring-framework/wiki/Code-Style">https://github.com/spring-projects/spring-framework/wiki/Code-Style</a></p>
<p>We repeat some of the aspects:</p>
<ul>

<li>

<p>Indentation uses a single TAB character (as for the Spring coding convention and the Eclipse coding convention).</p>
</li>
<li>

<p>Files are UTF-8 encoded with Unit line endings.</p>
</li>
<li>

<p>Lines do not have trailing whiltespaces.</p>
</li>
</ul>
<p>We deviate in some places:</p>
<ul>

<li>

<p>We allow for long code lines. Some coding conventions limit the length of a line to something like 80 characters (like FORTRAN did in the 70&#x2019;ies). Given widescreen monitors we believe that line wrapping makes code much harder to read than code with long(er) lines.</p>
</li>
<li>

<p>We usually do not make a space after statements like &#xed;f, for. We interpret &#xed;f and for as functions and for functions and methods we do not have a space between the name and the argument list either. That is, we write</p>
</li>
</ul>

<div>
<div>
<pre class="source">    if(condition) {
      // code
    }
</pre></div></div>

<p>The project is using a checkstyle profile, which currently only a very limited set of style issues. See <a class="externalLink" href="https://github.com/finmath/finmath-lib/blob/master/finmath-checkstyle.xml">finmath-checkstyle.xml</a>.</p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2020<a href="http://finmath.net">finmath.net</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>